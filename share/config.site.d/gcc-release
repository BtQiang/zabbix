# Be bourne shell compliant.

test -z "$CC" && CC=gcc

# -Wall and -Wextra enable groups of other warning flags.
# Do not repeat them. For more details, see [1] and [2].
#
# Warning flags go first, followed by code generation convention
# flags (i.e. -f..)[3].
# DO NOT list machine-specific flags (i.e. -m..)[4] here.
#
# Do not list flags that may emit warnings with partial
# confidence (e.g. -Wmaybe-uninitialized), are not strictly
# errors (e.g. -Wformat-nonliteral), or are prone to false-positives.
# They belong in debug profiles.
#
# --
# [1]: https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wall
# [2]: https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-W
# [3]: https://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html
# [4]: https://gcc.gnu.org/onlinedocs/gcc/Submodel-Options.html
test -z "$CFLAGS"                                                            \
    && CFLAGS="-O2 -g"                                                       \
    && CFLAGS="$CFLAGS -Wall"                                                \
    && CFLAGS="$CFLAGS -Wconversion"                                         \
    && CFLAGS="$CFLAGS -Warith-conversion -Wfloat-conversion"                \
    && CFLAGS="$CFLAGS -Wincompatible-pointer-types"                         \
    && CFLAGS="$CFLAGS -Wnull-dereference -Wpointer-arith"                   \
    && CFLAGS="$CFLAGS -Wwrite-strings"                                      \
    && CFLAGS="$CFLAGS -Woverlength-strings"
