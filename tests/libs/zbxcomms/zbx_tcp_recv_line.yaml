---
test case: "line in buffer with newlines"
in:
  buf_stat: "line1\nline2\n"
  mode: buffer contains next line
  read_return: [0, 1]
out:
  result: ["line1", "line2", "line3"]
---
test case: "first read without next line ptr"
in:
  buf_stat: "line1\nline2\nline3\n"
  mode: buffer not contains next line
  next_line_is_null: true
  read_return: [0, 1]
out:
  result: ["line1", "line2", "line3" ]
---
test case: "incomplete line without newline"
in:
  buf_stat: "line1"
  mode: buffer not contains next line
  next_line_is_null: true
  read_return: [0, 1]
out:
  result: [line1]
...
